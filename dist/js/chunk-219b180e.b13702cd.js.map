{"version":3,"sources":["webpack:///./src/views/Login.vue?e9b0","webpack:///./src/views/Login.vue?34f2","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5da6","webpack:///./src/views/Login.vue?7b2b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","currentPage","expression","attrs","slot","_v","staticStyle","on","$event","goto","ref","loginForm","rules1","model","callback","$$v","$set","loginLoading","submitLogin","registerForm","rules2","registerLoading","submitRegister","staticRenderFns","data","Error","regex","test","length","username1","password","email","newUser","phoneNum","newPW","confirmPW","mounted","destroyed","document","onkeypress","methods","registerKeyboardListener","e","charCode","page","$nextTick","console","log","$refs","validate","valid","res","success","title","message","userInfo","code","component"],"mappings":"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","file":"js/chunk-219b180e.b13702cd.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=0d878b8d&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=0d878b8d&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('el-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentPage === 'login'),expression:\"currentPage === 'login'\"}],staticClass:\"board\"},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"登录\")]),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.goto('register')}}},[_vm._v(\"新用户？前往注册\")])],1),_c('el-form',{ref:\"loginForm\",attrs:{\"model\":_vm.loginForm,\"status-icon\":\"\",\"rules\":_vm.rules1,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"prop\":\"username1\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"用户名\",\"prefix-icon\":\"el-icon-user\",\"autocomplete\":\"off\"},model:{value:(_vm.loginForm.username1),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username1\", $$v)},expression:\"loginForm.username1\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"密码\",\"prefix-icon\":\"el-icon-lock\",\"show-password\":\"\",\"autocomplete\":\"off\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"80%\"},attrs:{\"type\":\"primary\",\"loading\":_vm.loginLoading},on:{\"click\":function($event){return _vm.submitLogin()}}},[_vm._v(\"登录\")])],1)],1)],1),_c('el-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentPage === 'register'),expression:\"currentPage === 'register'\"}],staticClass:\"board\"},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"注册\")]),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.goto('login')}}},[_vm._v(\" 已注册？前往登入 \")])],1),_c('el-form',{ref:\"registerForm\",attrs:{\"model\":_vm.registerForm,\"status-icon\":\"\",\"rules\":_vm.rules2,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"prop\":\"newUser\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"用户名\",\"prefix-icon\":\"el-icon-user\",\"autocomplete\":\"off\"},model:{value:(_vm.registerForm.newUser),callback:function ($$v) {_vm.$set(_vm.registerForm, \"newUser\", $$v)},expression:\"registerForm.newUser\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"email\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"邮箱\",\"prefix-icon\":\"el-icon-message\",\"autocomplete\":\"off\"},model:{value:(_vm.registerForm.email),callback:function ($$v) {_vm.$set(_vm.registerForm, \"email\", $$v)},expression:\"registerForm.email\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"newRole\"}},[_c('el-select',{attrs:{\"placeholder\":\"用户身份\"},model:{value:(_vm.registerForm.newRole),callback:function ($$v) {_vm.$set(_vm.registerForm, \"newRole\", $$v)},expression:\"registerForm.newRole\"}},[_c('el-option',{attrs:{\"label\":\"管理员用户\",\"value\":\"ROLE_ADMIN\"}}),_c('el-option',{attrs:{\"label\":\"普通用户\",\"value\":\"ROLE_USER\"}})],1)],1),_c('el-form-item',{attrs:{\"prop\":\"newPW\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"密码\",\"prefix-icon\":\"el-icon-lock\",\"show-password\":\"\",\"autocomplete\":\"off\"},model:{value:(_vm.registerForm.newPW),callback:function ($$v) {_vm.$set(_vm.registerForm, \"newPW\", $$v)},expression:\"registerForm.newPW\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"confirmPW\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"确认密码\",\"prefix-icon\":\"el-icon-lock\",\"show-password\":\"\",\"autocomplete\":\"off\"},model:{value:(_vm.registerForm.confirmPW),callback:function ($$v) {_vm.$set(_vm.registerForm, \"confirmPW\", $$v)},expression:\"registerForm.confirmPW\"}})],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"80%\"},attrs:{\"type\":\"primary\",\"loading\":_vm.registerLoading},on:{\"click\":function($event){return _vm.submitRegister()}}},[_vm._v(\"注册\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login\">\n    <el-card class=\"board\" v-show=\"currentPage === 'login'\">\n      <div slot=\"header\">\n        <span class=\"title\">登录</span>\n        <el-button\n          style=\"float: right; padding: 3px 0\"\n          type=\"text\"\n          @click=\"goto('register')\"\n        >新用户？前往注册</el-button>\n      </div>\n\n      <el-form\n        :model=\"loginForm\"\n        status-icon\n        :rules=\"rules1\"\n        ref=\"loginForm\"\n        label-width=\"80px\"\n      >\n        <el-form-item prop=\"username1\">\n          <el-input\n            v-model=\"loginForm.username1\"\n            type=\"text\"\n            placeholder=\"用户名\"\n            prefix-icon=\"el-icon-user\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input\n            v-model=\"loginForm.password\"\n            type=\"text\"\n            placeholder=\"密码\"\n            prefix-icon=\"el-icon-lock\"\n            show-password\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button\n            style=\"width: 80%\"\n            type=\"primary\"\n            :loading=\"loginLoading\"\n            @click=\"submitLogin()\"\n            >登录</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n    <el-card class=\"board\" v-show=\"currentPage === 'register'\">\n      <div slot=\"header\">\n        <span class=\"title\">注册</span>\n        <el-button\n          style=\"float: right; padding: 3px 0\"\n          type=\"text\"\n          @click=\"goto('login')\"\n        >\n          已注册？前往登入\n        </el-button>\n      </div>\n      <el-form\n        :model=\"registerForm\"\n        status-icon\n        :rules=\"rules2\"\n        ref=\"registerForm\"\n        label-width=\"80px\"\n      >\n        <el-form-item prop=\"newUser\">\n          <el-input\n            v-model=\"registerForm.newUser\"\n            type=\"text\"\n            placeholder=\"用户名\"\n            prefix-icon=\"el-icon-user\"\n            autocomplete=\"off\"\n          />\n        </el-form-item>\n        <el-form-item prop=\"email\">\n          <el-input\n            v-model=\"registerForm.email\"\n            type=\"text\"\n            placeholder=\"邮箱\"\n            prefix-icon=\"el-icon-message\"\n            autocomplete=\"off\"\n          />\n        </el-form-item>\n        <el-form-item prop=\"newRole\">\n          <el-select v-model=\"registerForm.newRole\" placeholder=\"用户身份\">\n            <el-option label=\"管理员用户\" value=\"ROLE_ADMIN\"></el-option>\n            <el-option label=\"普通用户\" value=\"ROLE_USER\"></el-option>\n          </el-select>\n        </el-form-item>\n        <!--el-form-item prop=\"phoneNum\">\n          <el-input\n            v-model=\"registerForm.phoneNum\"\n            type=\"text\"\n            placeholder=\"手机号\"\n            prefix-icon=\"el-icon-phone\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item-->\n        <el-form-item prop=\"newPW\">\n          <el-input\n            v-model=\"registerForm.newPW\"\n            type=\"text\"\n            placeholder=\"密码\"\n            prefix-icon=\"el-icon-lock\"\n            show-password\n            autocomplete=\"off\"\n          />\n        </el-form-item>\n        <el-form-item prop=\"confirmPW\">\n          <el-input\n            v-model=\"registerForm.confirmPW\"\n            type=\"text\"\n            placeholder=\"确认密码\"\n            prefix-icon=\"el-icon-lock\"\n            show-password\n            autocomplete=\"off\"\n          />\n        </el-form-item>\n        <el-form-item>\n          <el-button\n            style=\"width: 80%\"\n            type=\"primary\"\n            :loading=\"registerLoading\"\n            @click=\"submitRegister()\"\n          >注册</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex'\nimport { getToken } from '../utils/auth';\nexport default {\n  name: 'Login',\n  data() {\n    let validateUser1 = (rule, value, callback) => {\n      // const regex = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\\.[a-zA-Z0-9_-]{2,3}){1,2})$/\n      if (value !== '') {\n        // console.log('success')\n        callback()\n      } else {\n        callback(new Error('请输入用户名'))\n      }\n      callback()\n    }\n\n    let validateEmail = (rule, value, callback) => {\n      const regex = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\\.[a-zA-Z0-9_-]{2,3}){1,2})$/\n      if (value === '') {\n        callback(new Error('请输入邮箱'))\n      } else if (regex.test(value)) {\n        // console.log('success')\n        callback()\n      } else {\n        callback(new Error('请输入有效邮箱'))\n      }\n    }\n\n    let validateUser2 = (rule, value, callback) => {\n      // const regex = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\\.[a-zA-Z0-9_-]{2,3}){1,2})$/\n      if (value !== '') {\n        // console.log('success')\n        callback()\n      } else {\n        callback(new Error('请输入用户名'))\n      }\n      callback()\n    }\n\n    let validatePhoneNum = (rule, value, callback) => {\n      const regex = /^[-+]?(([0-9]+)([.]([0-9]+))?|([.]([0-9]+))?)$/\n      if (regex.test(value) && value.length === 11) {\n        callback()\n      } else {\n        callback(new Error('请输入有效手机号'))\n      }\n      callback()\n    }\n\n    let validatePass = (rule, value, callback) => {\n      if (value.length < 1) {\n        callback(new Error('密码长度至少为6位'))\n      } else {\n        if (this.registerForm.confirmPW !== '') {\n          this.$refs.registerForm.validateField('confirmPW')\n        }\n        callback()\n      }\n    }\n\n    let validatePass2 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请再次输入密码'))\n      } else if (value !== this.registerForm.newPW) {\n        callback(new Error('两次输入密码不一致！'))\n      } else {\n        callback()\n      }\n    }\n\n    return {\n      currentPage: 'login',\n      loginLoading: false,\n      registerLoading: false,\n      loginForm: {\n        username1: '',\n        password: ''\n      },\n      registerForm: {\n        email: '',\n        newUser: '',\n        phoneNum: '',\n        newPW: '',\n        confirmPW: ''\n      },\n      rules1: {\n        username1: [{ validator: validateUser1, trigger: 'blur' }],\n        password: [{ validator: validatePass, trigger: 'blur' }]\n      },\n      rules2: {\n        email: [{ validator: validateEmail, trigger: 'blur' }],\n        newUser: [{ validator: validateUser2, trigger: 'blur' }],\n        phoneNum: [{ validator: validatePhoneNum, trigger: 'blur' }],\n        newPW: [{ validator: validatePass, trigger: 'blur' }],\n        confirmPW: [{ validator: validatePass2, trigger: 'blur' }]\n      }\n    }\n  },\n  mounted() {\n    this.goto('login')\n  },\n  destroyed() {\n    // console.log('destroyed')\n    document.onkeypress = null\n  },\n  methods: {\n    ...mapActions([\n      'login',\n      'register'\n    ]),\n    registerKeyboardListener(page) {\n      document.onkeypress = null\n\n    },\n    goto(page) {\n      document.onkeypress = null\n      const formName = page.charAt(0).toUpperCase() + page.substring(1)\n      document.onkeypress = (e) => {\n        if (e.charCode === 13) {\n          this['submit' + formName]()\n        }\n      }\n      this.currentPage = page\n      this.$nextTick(() => {\n        this.$refs[page + 'Form'].resetFields()\n      })\n    },\n    submitLogin() {\n      console.log('submit login')\n      this.$refs.loginForm.validate((valid) => {\n        if (valid) {\n          // console.log(this.loginForm)\n          this.login(this.loginForm).then(res => {\n            if (res.success) {\n              this.$notify.success({\n                title: res.message\n              })\n              let userInfo = JSON.parse(getToken())\n              console.log(userInfo)\n              let role = userInfo.role\n              if(role === 'ROLE_ADMIN') {\n                this.$router.push({ name: 'overview' })\n              }\n              else if(role === 'ROLE_USER') {\n                this.$router.push({ name: 'home' })\n              }\n              else {\n                this.$notify.error(\"无效的用户权限\")\n              }\n            } else {\n              this.$notify.error({\n                title: res.message\n              })\n            }\n          })\n        } else {\n          console.log('loginForm invalid')\n        }\n      })\n    },\n    submitRegister() {\n      console.log('submit register')\n      this.$refs.registerForm.validate((valid) => {\n        if (valid) {\n          console.log(this.registerForm)\n          this.register(this.registerForm).then(res => {\n            if (res.code == 0) {\n              this.$notify.success({\n                title: '注册成功'\n              })\n              this.goto('login')\n            } else {\n              this.$notify.error({\n                title: res.message\n              })\n            }\n          })\n        } else {\n          console.log('registerForm invalid')\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.board {\n  width: 40vw;\n  margin: 10vh auto 0;\n  text-align: left;\n}\n\n.title {\n  font-size: 20px;\n  margin-left: 10%;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=0d878b8d&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=0d878b8d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d878b8d\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}