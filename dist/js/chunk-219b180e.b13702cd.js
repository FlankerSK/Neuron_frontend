(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-219b180e"],{3670:function(e,r,t){},"857e":function(e,r,t){"use strict";var o=t("3670"),i=t.n(o);i.a},a55b:function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login"},[t("el-card",{directives:[{name:"show",rawName:"v-show",value:"login"===e.currentPage,expression:"currentPage === 'login'"}],staticClass:"board"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"title"},[e._v("登录")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(r){return e.goto("register")}}},[e._v("新用户？前往注册")])],1),t("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"status-icon":"",rules:e.rules1,"label-width":"80px"}},[t("el-form-item",{attrs:{prop:"username1"}},[t("el-input",{attrs:{type:"text",placeholder:"用户名","prefix-icon":"el-icon-user",autocomplete:"off"},model:{value:e.loginForm.username1,callback:function(r){e.$set(e.loginForm,"username1",r)},expression:"loginForm.username1"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"text",placeholder:"密码","prefix-icon":"el-icon-lock","show-password":"",autocomplete:"off"},model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password",r)},expression:"loginForm.password"}})],1),t("el-form-item",[t("el-button",{staticStyle:{width:"80%"},attrs:{type:"primary",loading:e.loginLoading},on:{click:function(r){return e.submitLogin()}}},[e._v("登录")])],1)],1)],1),t("el-card",{directives:[{name:"show",rawName:"v-show",value:"register"===e.currentPage,expression:"currentPage === 'register'"}],staticClass:"board"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"title"},[e._v("注册")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(r){return e.goto("login")}}},[e._v(" 已注册？前往登入 ")])],1),t("el-form",{ref:"registerForm",attrs:{model:e.registerForm,"status-icon":"",rules:e.rules2,"label-width":"80px"}},[t("el-form-item",{attrs:{prop:"newUser"}},[t("el-input",{attrs:{type:"text",placeholder:"用户名","prefix-icon":"el-icon-user",autocomplete:"off"},model:{value:e.registerForm.newUser,callback:function(r){e.$set(e.registerForm,"newUser",r)},expression:"registerForm.newUser"}})],1),t("el-form-item",{attrs:{prop:"email"}},[t("el-input",{attrs:{type:"text",placeholder:"邮箱","prefix-icon":"el-icon-message",autocomplete:"off"},model:{value:e.registerForm.email,callback:function(r){e.$set(e.registerForm,"email",r)},expression:"registerForm.email"}})],1),t("el-form-item",{attrs:{prop:"newRole"}},[t("el-select",{attrs:{placeholder:"用户身份"},model:{value:e.registerForm.newRole,callback:function(r){e.$set(e.registerForm,"newRole",r)},expression:"registerForm.newRole"}},[t("el-option",{attrs:{label:"管理员用户",value:"ROLE_ADMIN"}}),t("el-option",{attrs:{label:"普通用户",value:"ROLE_USER"}})],1)],1),t("el-form-item",{attrs:{prop:"newPW"}},[t("el-input",{attrs:{type:"text",placeholder:"密码","prefix-icon":"el-icon-lock","show-password":"",autocomplete:"off"},model:{value:e.registerForm.newPW,callback:function(r){e.$set(e.registerForm,"newPW",r)},expression:"registerForm.newPW"}})],1),t("el-form-item",{attrs:{prop:"confirmPW"}},[t("el-input",{attrs:{type:"text",placeholder:"确认密码","prefix-icon":"el-icon-lock","show-password":"",autocomplete:"off"},model:{value:e.registerForm.confirmPW,callback:function(r){e.$set(e.registerForm,"confirmPW",r)},expression:"registerForm.confirmPW"}})],1),t("el-form-item",[t("el-button",{staticStyle:{width:"80%"},attrs:{type:"primary",loading:e.registerLoading},on:{click:function(r){return e.submitRegister()}}},[e._v("注册")])],1)],1)],1)],1)},i=[],n=t("5530"),s=t("2f62"),l=t("5f87"),a={name:"Login",data:function(){var e=this,r=function(e,r,t){""!==r?t():t(new Error("请输入用户名")),t()},t=function(e,r,t){var o=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;""===r?t(new Error("请输入邮箱")):o.test(r)?t():t(new Error("请输入有效邮箱"))},o=function(e,r,t){""!==r?t():t(new Error("请输入用户名")),t()},i=function(e,r,t){var o=/^[-+]?(([0-9]+)([.]([0-9]+))?|([.]([0-9]+))?)$/;o.test(r)&&11===r.length?t():t(new Error("请输入有效手机号")),t()},n=function(r,t,o){t.length<1?o(new Error("密码长度至少为6位")):(""!==e.registerForm.confirmPW&&e.$refs.registerForm.validateField("confirmPW"),o())},s=function(r,t,o){""===t?o(new Error("请再次输入密码")):t!==e.registerForm.newPW?o(new Error("两次输入密码不一致！")):o()};return{currentPage:"login",loginLoading:!1,registerLoading:!1,loginForm:{username1:"",password:""},registerForm:{email:"",newUser:"",phoneNum:"",newPW:"",confirmPW:""},rules1:{username1:[{validator:r,trigger:"blur"}],password:[{validator:n,trigger:"blur"}]},rules2:{email:[{validator:t,trigger:"blur"}],newUser:[{validator:o,trigger:"blur"}],phoneNum:[{validator:i,trigger:"blur"}],newPW:[{validator:n,trigger:"blur"}],confirmPW:[{validator:s,trigger:"blur"}]}}},mounted:function(){this.goto("login")},destroyed:function(){document.onkeypress=null},methods:Object(n["a"])({},Object(s["b"])(["login","register"]),{registerKeyboardListener:function(e){document.onkeypress=null},goto:function(e){var r=this;document.onkeypress=null;var t=e.charAt(0).toUpperCase()+e.substring(1);document.onkeypress=function(e){13===e.charCode&&r["submit"+t]()},this.currentPage=e,this.$nextTick((function(){r.$refs[e+"Form"].resetFields()}))},submitLogin:function(){var e=this;console.log("submit login"),this.$refs.loginForm.validate((function(r){r?e.login(e.loginForm).then((function(r){if(r.success){e.$notify.success({title:r.message});var t=JSON.parse(Object(l["a"])());console.log(t);var o=t.role;"ROLE_ADMIN"===o?e.$router.push({name:"overview"}):"ROLE_USER"===o?e.$router.push({name:"home"}):e.$notify.error("无效的用户权限")}else e.$notify.error({title:r.message})})):console.log("loginForm invalid")}))},submitRegister:function(){var e=this;console.log("submit register"),this.$refs.registerForm.validate((function(r){r?(console.log(e.registerForm),e.register(e.registerForm).then((function(r){0==r.code?(e.$notify.success({title:"注册成功"}),e.goto("login")):e.$notify.error({title:r.message})}))):console.log("registerForm invalid")}))}})},c=a,u=(t("857e"),t("2877")),m=Object(u["a"])(c,o,i,!1,null,"0d878b8d",null);r["default"]=m.exports}}]);
//# sourceMappingURL=chunk-219b180e.b13702cd.js.map