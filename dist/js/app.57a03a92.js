(function(e){function t(t){for(var n,a,u=t[0],s=t[1],i=t[2],l=0,p=[];l<u.length;l++)a=u[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);f&&f(t);while(p.length)p.shift()();return c.push.apply(c,i||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,a=1;a<r.length;a++){var u=r[a];0!==o[u]&&(n=!1)}n&&(c.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},o={app:0},c=[];function u(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-13737b28":"761949f6","chunk-219b180e":"b13702cd","chunk-3a0e90ce":"c685af86","chunk-4593b909":"0e2ce4e8","chunk-4f11c3a3":"47cb7455","chunk-5880a37e":"b9b664eb","chunk-8d47e6ce":"113cc5ff","chunk-d3ae2fa0":"069169c9","chunk-e5406946":"b3ee09d1","chunk-ff55c590":"1ac3ca94"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r={"chunk-13737b28":1,"chunk-219b180e":1,"chunk-3a0e90ce":1,"chunk-4593b909":1,"chunk-4f11c3a3":1,"chunk-5880a37e":1,"chunk-8d47e6ce":1,"chunk-d3ae2fa0":1,"chunk-e5406946":1,"chunk-ff55c590":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-13737b28":"bf7b135f","chunk-219b180e":"19b7d85a","chunk-3a0e90ce":"3ee60055","chunk-4593b909":"23ad7c01","chunk-4f11c3a3":"21f52f70","chunk-5880a37e":"54a1cdf1","chunk-8d47e6ce":"46f98bc1","chunk-d3ae2fa0":"97dbb05e","chunk-e5406946":"46f98bc1","chunk-ff55c590":"3ee60055"}[e]+".css",o=s.p+n,c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var i=c[u],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===n||l===o))return t()}var p=document.getElementsByTagName("style");for(u=0;u<p.length;u++){i=p[u],l=i.getAttribute("data-href");if(l===n||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var n=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=n,delete a[e],f.parentNode.removeChild(f),r(c)},f.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var c=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=c);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=u(e);var p=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(f);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",p.name="ChunkLoadError",p.type=n,p.request=a,r[1](p)}o[e]=void 0}};var f=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var p=0;p<i.length;p++)t(i[p]);var f=l;c.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("caad"),r("d3b7"),r("2532"),r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],c=(r("034f"),r("2877")),u={},s=Object(c["a"])(u,a,o,!1,null,null,null),i=s.exports,l=r("8c4f");n["default"].use(l["a"]);var p=[{path:"/",name:"default",redirect:{name:"login"}},{path:"/login",name:"login",component:function(){return r.e("chunk-219b180e").then(r.bind(null,"a55b"))}},{path:"/customer",name:"customer",component:function(){return r.e("chunk-5880a37e").then(r.bind(null,"43d9"))},children:[{path:"home",name:"home",component:function(){return r.e("chunk-8d47e6ce").then(r.bind(null,"7f48"))}}]},{path:"/customer/table/:tableId",name:"fill",component:function(){return r.e("chunk-ff55c590").then(r.bind(null,"6a22"))}},{path:"/manage",name:"manage",component:function(){return r.e("chunk-13737b28").then(r.bind(null,"eab3"))},children:[{path:"overview",name:"overview",component:function(){return r.e("chunk-e5406946").then(r.bind(null,"7494"))}},{path:"create/:tableId",name:"create",component:function(){return r.e("chunk-4f11c3a3").then(r.bind(null,"56c6"))}},{path:"monitor/:tableId",name:"monitor",component:function(){return r.e("chunk-4593b909").then(r.bind(null,"8712"))}},{path:"release/:tableId",name:"release",component:function(){return r.e("chunk-d3ae2fa0").then(r.bind(null,"a599"))}}]},{path:"/manage/table/:tableId/answer/:answerId",name:"collection",component:function(){return r.e("chunk-3a0e90ce").then(r.bind(null,"9b9f"))}}],f=new l["a"]({mode:"history",base:"/",routes:p}),d=f,m=r("2f62"),h={customerTable:function(e){return e.customer.paper},loginState:function(e){return e.user.loginState},userDetails:function(e){return e.user.userDetails},createPaperVisible:function(e){return e.paper.createPaperVisible},paperInfo:function(e){return e.paper.currentPaper.paperInfo},questionList:function(e){return e.paper.currentPaper.questionList},monitorPaper:function(e){return e.customer.paperStatistic},answers:function(e){return e.customer.answers},allTables:function(e){return e.paper.paperList}},b=h,g=(r("99af"),r("a9e3"),r("ac1f"),r("1276"),r("5530")),v=r("b85c"),w=(r("96cf"),r("1da1")),k=r("bc3a"),T=r.n(k),S={tableUrl:"/api/admin/table"};function x(){return T()({url:"".concat(S.tableUrl),method:"GET"})}function I(e){return T()({url:"".concat(S.tableUrl,"/").concat(e),method:"GET"})}function P(e){return T()({url:"".concat(S.tableUrl,"/").concat(e,"/answer"),method:"GET"})}function O(e){return T()({url:"".concat(S.tableUrl,"/").concat(e),method:"DELETE"})}function y(e){return T()({url:"".concat(S.tableUrl),method:"POST",data:e})}function _(e){return T()({url:"".concat(S.tableUrl,"/").concat(e.id),method:"PUT",data:e})}function R(e){return console.log(e),T()({url:"".concat(S.tableUrl,"/").concat(e.id,"/release"),method:"POST",data:e})}function L(e){return T()({url:"".concat(S.tableUrl,"/").concat(e,"/release"),method:"DELETE"})}var j={answerUrl:"/api/user/table"};function U(e){return T()({url:"".concat(j.answerUrl,"/").concat(e,"/answer"),method:"GET"})}function E(e,t){return console.log(t),T()({url:"".concat(j.answerUrl,"/").concat(e,"/answer"),method:"PUT",data:{answers:t}})}function N(e,t){return console.log(t),T()({url:"".concat(j.answerUrl,"/").concat(e,"/answer/submit"),method:"PUT",data:t})}var A={state:{paper:{},paperStatistic:{},answers:[]},mutations:{set_paper:function(e,t){e.paper=t},set_paperStatistic:function(e,t){e.paperStatistic=t},set_answers:function(e,t){e.answers=t}},actions:{getFullTable:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,console.log("get table ".concat(r)),e.next=4,U(r);case 4:if(a=e.sent,!a||0!=a.data.code){e.next=12;break}return o=a.data.data,console.log(o),n("set_paper",o),e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getFullTableStatistic:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,u,s,i,l,p,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,console.log("get paperStatistic with tableId: ".concat(r)),e.next=4,P(r);case 4:if(a=e.sent,console.log(a),!a||!a.data.success){e.next=33;break}o=a.data.content,c=Object(v["a"])(o.questionStatistics),e.prev=9,c.s();case 11:if((u=c.n()).done){e.next=20;break}if(s=u.value,3!==s.type){e.next=15;break}return e.abrupt("continue",18);case 15:i=s.filledInNum,l=Object(v["a"])(s.optionStatistics);try{for(l.s();!(p=l.n()).done;)f=p.value,f.percent=Math.floor(f.selectedNum/i*1e3)/10+"%"}catch(d){l.e(d)}finally{l.f()}case 18:e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](9),c.e(e.t0);case 25:return e.prev=25,c.f(),e.finish(25);case 28:return console.log(o),n("set_paperStatistic",o),e.abrupt("return",!0);case 33:return e.abrupt("return",!1);case 34:case"end":return e.stop()}}),e,null,[[9,22,25,28]])})));function t(t,r){return e.apply(this,arguments)}return t}(),getAnswersRow:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(e){var t=e.split("T"),r=t[0].split("-"),n=t[1].split(":");return new Date(Number(r[0]),Number(r[1])-1,Number(r[2]),Number(n[0]),Number(n[1]),Number(n[2]))},n=t.commit,console.log("getAnswerRow with tableId: ".concat(r)),e.next=5,P(r);case 5:if(o=e.sent,!o||0!=o.data.code){e.next=15;break}for(c=o.data.data,console.log("get answers"),u=0;u<c.length;u++)s=c[u].date,c[u].date=a(s).toLocaleString();return console.log(c),n("set_answers",c),e.abrupt("return",!0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),terminateCollection:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(g["a"])({},r),r.status=n.status="STOP",e.next=4,_(n);case 4:return a=e.sent,console.log(r),e.abrupt("return",a&&a.data.success);case 7:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),restartCollection:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,u,s,i,l,p,f,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.getters,o=a.monitorPaper,c=Object(g["a"])({},o),r?(u=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()," 00:00:00")},s=u(r[0]),i=u(r[1]),o.startTime=c.startTime=s,o.endTime=c.endTime=i,l=Date.parse(s),p=Date.parse(i),f=(new Date).valueOf(),o.status=c.status=p<=f?"STOP":f>=l&&f<=p?"START":"INIT"):(o.startTime=c.startTime=null,o.endTime=c.endTime=null,o.status=c.status="START"),console.log(c),e.next=7,_(c);case 7:if(d=e.sent,!d||!d.data.success){e.next=13;break}return n("set_paperStatistic",c),e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),saveAnswers:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("save answers in actions"),e.next=3,E(r.tableId,r.answers);case 3:return n=e.sent,console.log(n),e.abrupt("return",n&&0==n.data.code);case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),submitAnswers:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("submit answers in actions"),e.next=3,N(r.tableId,r.data);case 3:return n=e.sent,console.log(n),e.abrupt("return",n&&0==n.data.code);case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}},q=A,D=(r("a434"),{tableUrl:"/api/user/table"});function M(){return T()({url:"".concat(D.tableUrl),method:"GET"})}var C={questionPre:"/api/question"};function B(e){return T()({url:"".concat(C.questionPre,"/updateQuestion"),method:"POST",data:e})}var G={state:{paperList:[],currentPaper:{paperInfo:{},questionList:[]},createPaperVisible:!1},mutations:{set_tableList:function(e,t){e.paperList=t},setTableId:function(e,t){e.currentPaper.id=t},set_paperInfo:function(e,t){e.currentPaper.paperInfo=t},set_questionList:function(e,t){e.currentPaper.questionList=t},add_question:function(e,t){e.currentPaper.questionList.push(t)},set_createPaperVisible:function(e,t){e.createPaperVisible=t}},actions:{getAdminAllTables:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.getters,e.next=3,x();case 3:a=e.sent,a&&0==a.data.code&&(o=a.data.data,console.log(o),r("set_tableList",o),console.log(n),console.log(n.allTables));case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getUserAllTables:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.getters,e.next=3,M();case 3:a=e.sent,a&&0==a.data.code&&(o=a.data.data,console.log(o),r("set_tableList",o),console.log(n),console.log(n.allTables));case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),createNewTable:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.getters,console.log(r),e.next=4,y(r);case 4:if(o=e.sent,o&&0==o.data.code){e.next=7;break}return e.abrupt("return",!1);case 7:return c=o.data.data,u=a.userDetails.username,s={id:c,title:r.title,author:u,update_date:Date(),questions:[],status:"UNPUBILSH"},n("setTableId",c),n("set_paperInfo",s),n("set_questionList",[]),e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),editTable:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,I(r);case 3:if(a=e.sent,!a||0!=a.data.code){e.next=11;break}return o=a.data.data,n("set_paperInfo",o),n("set_questionList",o.questions),e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),updateTable:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,_(r);case 3:if(a=e.sent,!a||0!=a.data.code){e.next=9;break}return n("set_paperInfo",r),e.abrupt("return",{success:!0,message:"保存成功"});case 9:return e.abrupt("return",{success:!1,message:a.data.message});case 10:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),deleteTable:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,a=n.paperList[r],e.next=4,O(a.id);case 4:if(o=e.sent,!o||0!=o.data.code){e.next=10;break}return n.paperList.splice(r,1),e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),releaseTable:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.getters,a=n.paperInfo,null==a.startTime&&(a.status="PUBLISHING"),console.log(a),console.log(1),e.next=7,R(r);case 7:return o=e.sent,console.log(o),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),stopReleaseTable:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.getters,a=t.state,o=n.paperInfo,o.status="UNPUBLISH",c=a.paperList[r],e.next=6,L(c.id);case 6:if(u=e.sent,a.paperList[r].status="UNPUBLISH",!u||0!=u.data.code){e.next=13;break}return console.log(a.paperList),e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),createQuestion:function(e,t){var r=e.commit,n=e.getters,a={title:[],type:t};switch(t){case"SINGLE_ANSWER_MULTIPLE_CHOICE":case"MULTIPLE_ANSWER_MULTIPLE_CHOICE":a.options=[{}];break;case"FILL_IN":case"FILE_UPLOAD":case"LIST_QUESTION":default:break}var o=n.paperInfo;o.questions.push(a),r("add_paperInfo",o),console.log(a),console.log(o)},updateQuestion:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(o in n=r.id,a=r.options,a)a[o].questionId=n,a[o].sequence=Number(o)+1;return console.log(r),e.next=6,B(r);case 6:return c=e.sent,e.abrupt("return",c&&c.data.success);case 8:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),deleteQuestion:function(e,t){var r=e.state,n=r.currentPaper.questionList;n.splice(t,1)}}},H=G,F={userPre:"/api/account"};function Q(e){return T()({url:"".concat(F.userPre,"/register"),method:"POST",data:e}).catch((function(e){if(e.response)return e.response}))}function V(e){return T()({url:"".concat(F.userPre,"/login"),method:"POST",headers:{"Access-Control-Allow-Origin":"*"},data:e}).catch((function(e){if(e.response&&401===e.response.status)return e.response}))}var W=r("5f87"),J={state:{loginState:!1,userDetails:{}},mutations:{set_loginState:function(e){e.loginState=!0},set_userDetails:function(e,t){e.userDetails=t}},actions:{login:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a={username:r.username1,password:r.password},e.next=4,V(a);case 4:if(o=e.sent,!o||!o.data||0!=o.data.code){e.next=16;break}return c={username:r.username1,role:o.data.data.role},console.log(c),n("set_userDetails",c),n("set_loginState",!0),localStorage.setItem("access",o.data.data.access_token),localStorage.setItem("refresh",o.data.data.refresh_token),Object(W["c"])(c),e.abrupt("return",{success:!0,message:"登入成功"});case 16:return console.log(o.data.code),e.abrupt("return",{success:!1,message:o.data.message});case 18:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),register:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={username:r.newUser,password:r.newPW,role:r.newRole,email:r.email},e.next=3,Q(n);case 3:return a=e.sent,console.log(a),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),logoutAct:function(e){var t=e.commit;return t("set_userDetails",{}),t("set_loginState",!1),Object(W["b"])(),localStorage.removeItem("access"),localStorage.removeItem("refresh"),!0}}},z=J;n["default"].use(m["a"]);var $=new m["a"].Store({state:{},mutations:{},actions:{},modules:{customer:q,paper:H,user:z},getters:b});r("2ca0");d.beforeEach((function(e,t,r){if($.state.user.loginState&&"/login"===e.path)r({name:"overview"});else{var n=Object(W["a"])();if(n)return $.commit("set_loginState",!0),$.commit("set_userDetails",{id:Number(n)}),void("/login"===e.path?r({name:"overview"}):r());"/login"===e.path||e.path.startsWith("/customer")?r():r("/login")}}));var K=r("a7fe"),Y=r.n(K),X=r("5c96"),Z=r.n(X),ee=(r("0fae"),{token:"/api/token"});function te(){return T()({url:"".concat(ee.token,"/access-token"),method:"POST"})}n["default"].use(Y.a,T.a),T.a.defaults.baseURL="http://localhost:8080",n["default"].use(Z.a),n["default"].config.productionTip=!1,new n["default"]({router:d,store:$,render:function(e){return e(i)}}).$mount("#app"),T.a.interceptors.request.use((function(e){var t,r=e.url;r.includes("/api/account/login","/api/account/register")||(t="/api/token/access-token"==r?localStorage.getItem("refresh"):localStorage.getItem("access"),t&&(e.headers["Authorization"]="Bearer "+t));return e}),(function(e){Promise.reject(e)})),T.a.interceptors.response.use((function(e){return console.log("响应数据：",e),e}),(function(e){if(console.error("响应错误：",e),e.response){var t;switch(e.response.status){case 401:if(t=e.response.config.url,"/api/token/access-token"!=t)return new Promise((function(t,r){te().then((function(n){if(n.data&&n.data.data){localStorage.setItem("access",n.data.data);var a=e.response.config;return a.headers.Authorization="Bearer ".concat(localStorage.getItem("access")),T()(a).then(t).catch(r)}r(e)})).catch(r)}));X["Message"].error("需要登录"),Object(W["b"])(),localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login",console.info("重定向至登陆界面");break;case 404:X["Message"].error("资源未找到");break;case 500:X["Message"].error("服务器异常");break;default:X["Message"].error(e.response.data.message||"未知错误")}return Promise.reject(e)}return e.request?(console.error("请求已发出，但没有收到响应"),X["Message"].error("请求失败，请稍后再试"),Promise.reject(e)):(console.error("发送请求时发生了错误",e.message),X["Message"].error("请求失败，请检查网络连接"),Promise.reject(e))}))},"5f87":function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return s}));var n=r("a78e"),a=r.n(n),o="NJUSE-QUESTIONNAIRE";function c(){return a.a.get(o)}function u(e){return a.a.set(o,e)}function s(){return a.a.remove(o)}},"85ec":function(e,t,r){}});
//# sourceMappingURL=app.57a03a92.js.map